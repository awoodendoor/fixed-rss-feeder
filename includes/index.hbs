<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <title>{{siteTitle}}</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="noindex, nofollow" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
  <link rel="alternate" type="application/rss+xml" title="{{siteTitle}}" href="{{feedHref}}" />
  

  <!-- å¼•ç”¨å¤–éƒ¨ CSS -->
  <link rel="stylesheet" href="statics/index.css" />
</head>

<body>
  <header>
    <dl>
      <dt>ç«™ç‚¹ï¼š</dt><dd>{{siteTitle}}</dd>
      <dt>æ„å»ºï¼š</dt><dd>{{siteBuildTimestamp}}</dd>
      <dt>ç‰ˆæœ¬ï¼š</dt><dd>{{cliVersion}}</dd>
    </dl>
  </header>

  {{#each articles}}
  <article>
    <details>
      <summary>
        <h1>{{title}}</h1>
      </summary>
      <div class="meta-info">
        <span>æ¥æºï¼š<a href="{{source.siteUrl}}">{{source.title}}</a></span>
        <span>æ—¥æœŸï¼š<time>{{isoPublishDate}}</time></span>
        {{#if readingTimeInMin}}
        <span>é˜…è¯»æ—¶é—´ï¼š{{readingTimeInMin}} åˆ†é’Ÿ</span>
        {{/if}}
        {{#if wordCount}}
        <span>å­—æ•°ï¼š{{wordCount}}</span>
        {{/if}}
      </div>
      
      {{#if imageUrl}}
      <img src="{{imageUrl}}" alt="{{title}}" class="article-image" referrerpolicy="no-referrer">
      {{/if}}
      
      <div class="content">
        <p>{{description}}</p>
      </div>
    </details>
  </article>
  {{/each}}

  <!-- â­ åŠ è½½æ›´å¤šæŒ‰é’® -->
  <div id="load-more-container">
    <button id="load-more-btn">åŠ è½½æ›´å¤šæ–‡ç« </button>
  </div>

 <script>
(function() {
  console.log('ğŸš€ åˆ†é¡µè„šæœ¬å¼€å§‹æ‰§è¡Œ');
  
  // ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œä¸ç­‰å¾… DOMContentLoaded
  function initPagination() {
    const articles = document.querySelectorAll('article');
    const loadMoreBtn = document.getElementById('load-more-btn');
    const itemsPerPage = 10;

    console.log('ğŸ“Š æ€»æ–‡ç« æ•°:', articles.length);
    
    if (!loadMoreBtn) {
      console.error('âŒ æ‰¾ä¸åˆ°åŠ è½½æ›´å¤šæŒ‰é’®');
      return;
    }

    // å¦‚æœæ–‡ç« æ•°å°‘äºç­‰äº10ï¼Œéšè—æŒ‰é’®
    if (articles.length <= itemsPerPage) {
      console.log('ğŸ“Œ æ–‡ç« ä¸è¶³10ç¯‡ï¼Œéšè—æŒ‰é’®');
      loadMoreBtn.style.display = 'none';
      return;
    }

    // éšè—ç¬¬10æ¡ä¹‹åçš„æ–‡ç« 
    let hiddenCount = 0;
    articles.forEach((article, index) => {
      if (index >= itemsPerPage) {
        article.classList.add('hidden');
        hiddenCount++;
      }
    });

    console.log('âœ… å·²éšè—', hiddenCount, 'ç¯‡æ–‡ç« ');
    console.log('ğŸ” éªŒè¯éšè—æ•°é‡:', document.querySelectorAll('article.hidden').length);

    // æ›´æ–°æŒ‰é’®æ–‡æ¡ˆ
    function updateButton() {
      const hiddenArticles = document.querySelectorAll('article.hidden');
      console.log('ğŸ“ æ›´æ–°æŒ‰é’®ï¼Œå‰©ä½™éšè—:', hiddenArticles.length);
      
      if (hiddenArticles.length === 0) {
        loadMoreBtn.textContent = 'æ²¡æœ‰æ›´å¤šæ–‡ç« äº†';
        loadMoreBtn.disabled = true;
        loadMoreBtn.style.display = 'none';
      } else {
        loadMoreBtn.textContent = `åŠ è½½æ›´å¤š (${hiddenArticles.length} ç¯‡å‰©ä½™)`;
        loadMoreBtn.disabled = false;
      }
    }

    updateButton();

    // ç‚¹å‡»äº‹ä»¶
    loadMoreBtn.addEventListener('click', function() {
      console.log('ğŸ–±ï¸ ç‚¹å‡»åŠ è½½æ›´å¤š');
      const hiddenArticles = document.querySelectorAll('article.hidden');
      
      // æ˜¾ç¤ºæ¥ä¸‹æ¥çš„10æ¡
      let showCount = 0;
      for (let i = 0; i < itemsPerPage && i < hiddenArticles.length; i++) {
        hiddenArticles[i].classList.remove('hidden');
        showCount++;
      }
      
      console.log('âœ… æ˜¾ç¤ºäº†', showCount, 'ç¯‡æ–‡ç« ');
      updateButton();
    });
  }

  // å¦‚æœ DOM å·²ç»åŠ è½½å®Œæˆï¼Œç«‹å³æ‰§è¡Œ
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initPagination);
  } else {
    // DOM å·²ç»å‡†å¤‡å¥½äº†ï¼Œç«‹å³æ‰§è¡Œ
    initPagination();
  }
})();
</script>
</body>
</html>